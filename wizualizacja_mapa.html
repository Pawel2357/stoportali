<!DOCTYPE html>
<html>
  <head>
  	<meta charset="utf-8">
    <script src="http://d3js.org/d3.v3.min.js" charset="utf-8">

    //<script src="d3.min.js" charset="utf-8">
    	</script>


    <style>
    	.axis path,
    	.axis line {
    		fill: none;
    		stroke: black;
			shape-rendering: crispEdges;
    	}

    	.axis text {
    		font-family: sans-serif;
    		font-size: 7px;
    	}

    	h1 {
    		font-family: sans-serif;
    		font-weight: 300;
    	}
	</style>
  </head>
  <body>


	


    <script>

    	//basic variables
    	var h=100;
    	var w=400;
    	var ds; //global variable for data
    	var padding_w = 40;
    	var padding_h = 10;
    	
    	function getDate(d){

    		var strDate = new String(d);

    		var year = strDate.substr(0,4);
    		var month = strDate.substr(4,2);
    		var day = strDate.substr(6,2);

    		return new Date(year, month, day);
    	} 


		//loading data from csv
		/*d3.csv("dane2.csv", function(error, data){

			if(error) {
				console.log(error);
			} else {
				console.log(data);
				ds = data;
			}
		});	
*/

		ds = [{"month":1,"najdluzej_trwajace_ogloszenie":29},
		{"month":20150101,"najdluzej_trwajace_ogloszenie":256},
		{"month":20150201,"najdluzej_trwajace_ogloszenie":207},
		{"month":20150301,"najdluzej_trwajace_ogloszenie":24},
		{"month":20150401,"najdluzej_trwajace_ogloszenie":202},
		{"month":20150501,"najdluzej_trwajace_ogloszenie":125},
		{"month":20150601,"najdluzej_trwajace_ogloszenie":110},
		{"month":20150701,"najdluzej_trwajace_ogloszenie":80},
		{"month":20150801,"najdluzej_trwajace_ogloszenie":256},
		{"month":20150901,"najdluzej_trwajace_ogloszenie":100},
		{"month":20151001,"najdluzej_trwajace_ogloszenie":193},
		{"month":20151101,"najdluzej_trwajace_ogloszenie":90},
		{"month":20151201,"najdluzej_trwajace_ogloszenie":0}];

		var minDate = getDate(ds[0]['month']);
		var maxDate = getDate(ds[ds.length-1]['month']);

		console.log(minDate);


		var xScale = d3.time.scale()
			.domain([
				minDate,maxDate

				])
			.range([padding_w, w-padding_w]);

		var yScale = d3.scale.linear()
			.domain([
				d3.min( ds, function(d) {return d.najdluzej_trwajace_ogloszenie; }),
				d3.max(ds, function(d) {return d.najdluzej_trwajace_ogloszenie; })
				])
			.range([h-padding_h, padding_h]);



		var lineFun = d3.svg.line()
			.x( function(d) {return xScale(d.month); })
			.y( function(d) {return yScale(d.najdluzej_trwajace_ogloszenie); })  //wejscia later can be changed for column name
			.interpolate("linear");


		

		var svg = d3.select("body").append("svg").attr({width:w, height:h});

		var viz = svg.append("path")
			.attr({
				d: lineFun(ds),    //place where I insert data - ds variable
				"stroke" : "purple",
				"stroke-width" : 2,
				"fill" : "none"
			});


		



			
		var xAxisGen = d3.svg.axis().scale(xScale).orient("bottom").tickFormat(d3.time.format("%b")); 

		var yAxisGen = d3.svg.axis().scale(yScale).orient("left").ticks(4);	

		var xAxis = svg.append("g").call(xAxisGen)
			.attr("class", "axis")
			.attr("transform", "translate(0,"+ h-padding_h + ")");

		var yAxis = svg.append("g").call(yAxisGen)
			.attr("class", "axis")
			.attr("transform", "translate("+ padding_w + ", 0)");


		
    </script>




  </body>
</html>